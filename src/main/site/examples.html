<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Carrot<sup>2</sup> search results clustering plugin for ElasticSearch (REST API)</title>

    <link href="assets/css/bootstrap.min.css" rel="stylesheet" />
    <link href="assets/css/prettify.css" rel="stylesheet" />

    <style>
      body {
        margin: 10px;
      }

      #reqdump {
        background-color: #e5e5e5;
      }

      #sampleIndex {
        display: none;
      }
    </style>
  </head>

  <body>
    <div class="container">
      <div class="row">
        <div class="span12">
          <div class="page-header">
            <h1>elasticsearch-carrot2</h1>

            <p>REST API examples, step by step.</p>
          </div>
        </div>
      </div>

      <div class="row" id="sampleIndex">
        <div class="span12">
          <div class="alert alert-block">
            Indexing sample docs...
            <div class="progress progress-striped active">
              <div class="bar" style="width: 0%;"></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="assets/js/jquery-2.0.2.min.js"></script>
    <script src="assets/js/sample-data.js"></script>
    <script>
      $(document).ready(function () {
        // Render the response of all the examples against a live instance.
        function renderExamples() {
          // TODO: render examples
        }

        // Check if we have the document index. If not, index first.
        $.ajax({
          url: "/test/test/1",
          success: renderExamples,
          error: function() {
            $("#sampleIndex").show();
            doIndex(function(current, total) {
              if (current < total) {
                $("#sampleIndex .bar").css("width", Math.round(100 * current / total) + "%");
              } else {
                $("#sampleIndex").slideUp(1000, renderExamples);
              }
            });
          }
        });
      });
    </script>
  </body>
</html>
